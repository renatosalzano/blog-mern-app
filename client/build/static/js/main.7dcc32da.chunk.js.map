{"version":3,"sources":["auth/useAuth.js","auth/AuthContext.js","asset/default_user.png","components/user/UserPicture.jsx","components/user/UserButton.jsx","hooks/useInputText.js","components/inputs/SearchBar.jsx","components/Navbar.jsx","hooks/useFinder.js","hooks/usePostState.js","components/Spinner.jsx","components/posts/detail/PostLoading.jsx","components/posts/detail/AddPostButton.jsx","hooks/useInputTag.js","components/inputs/InputText.jsx","components/inputs/InputTag.jsx","components/inputs/TextArea.jsx","components/posts/NewPost.jsx","hooks/useMatchUser.js","components/posts/comment/AddComment.jsx","components/buttons/OptionButton.jsx","components/posts/comment/EditComment.jsx","hooks/useLikeHandler.js","components/posts/detail/LikeButton.jsx","components/posts/comment/LikeContainer.jsx","components/posts/comment/CommentContent.jsx","components/posts/comment/Comment.jsx","components/posts/comment/ExpandComment.jsx","components/posts/comment/CommentList.jsx","hooks/useCommentState.js","components/posts/detail/DislikeButton.jsx","components/posts/detail/LikeContainer.jsx","components/posts/detail/Tags.jsx","components/posts/detail/Content.jsx","components/posts/Post.jsx","components/posts/UpdatePost.jsx","components/posts/PostList.jsx","components/pages/Home.jsx","components/login/LogIn.jsx","components/login/SignUp.jsx","components/pages/LoginPage.jsx","components/posts/detail/Post404.jsx","components/pages/PostPage.jsx","components/pages/SinglePost.jsx","components/buttons/SettingsButton.jsx","components/user/UserHeader.jsx","components/buttons/UploadButton.jsx","components/user/panel/PublicSection.jsx","hooks/useUpdatePic.js","components/user/panel/AccountSection.jsx","components/user/panel/PasswordSection.jsx","components/user/panel/DeleteSection.jsx","components/user/UserPanel.jsx","components/pages/UserPage.jsx","hooks/useUserPageState.js","Router.js","App.js","index.js"],"names":["useAuth","auth","useCallback","a","type","filter","req_obj","password","res","status","axios","post","get","patch","delete","response","action","target_id","console","error","AuthContext","createContext","AuthProvider","children","useState","undefined","user","setUser","signUp","setSignUp","newPost","setNewPost","errorMessage","setErrorMessage","check_error","warn","statusText","log","data","error_message","clear_error_message","log_in","user_info","get_logged","update_account","sign_up","log_out","delete_account","string","useEffect","Provider","value","UserPicture","src","user_name","is_link","memo","UserPicWithLink","to","className","default_user","alt","UserPic","UserButton","useContext","history","useHistory","pic","onClick","push","useInputText","init","input","setInput","setError","input_handler","evt","preventDefault","name","target","required_field","output","trim","clear_error","check_empty_field","SearchBar","isFocus","setIsFocus","search","focus_handler","onSubmit","onChange","onFocus","onBlur","Navbar","useFinder","find","usePostState","posts","setPosts","postInfo","setPostInfo","edit","setEdit","loadingPost","setLoadingPost","get_posts","src_posts","sumbit_post","updated_posts","delete_post","post_id","obj","_id","update_post","_post","updated_post","comment_list","map","sort_posts","arr_to_sort","sort","b","Date","date","toggle_edit_post","Spinner","PostLoading","AddPostButton","state","useInputTag","inputTag","setInputTag","tags","setTags","tagError","setTagError","ruleWarn","setRuleWarn","input_tag_handler","check_tags_error","length","submit_tag","input_tag","toLowerCase","replace","includes","remove_tag","tag_name","tag_filtered","tag","InputText","class_name","placeholder","label","viewPass","setViewPass","boxRef","useRef","labelRef","inputRef","focus","current","useLayoutEffect","on_fire","document","activeElement","style","marginTop","scrollHeight","setProperty","ref","htmlFor","ErrorMessage","InputTag","tag_arr","onTagClick","rule_warn","rule_warn_message","TagList","TextArea","max_length","min_rows","max_rows","minRows","maxRows","NewPost","open","server_error","title","content","publish","text_err","tags_err","useMatchUser","matched","setMatched","id","AddComment","submit_comment","OptionButton","target_name","option_delete","option_edit","active","setActive","confirm","setConfirm","EditComment","comment_id","update_comment","edit_comment","useLikeHandler","likes","like","setLike","dislikes","dislike","setDislike","set_like","target_type","LikeButton","like_arr","LikeContainer","comment","CommentContent","text","contentRef","expandText","setExpandTest","link","setLink","line_text","split","current_text","slice","join","textContent","Comment","author","edit_mode","user_id","thumbnail","toLocaleDateString","year","month","day","ExpandComment","expand_event","comment_count","loading","CommentList","comment_remain","comments","setComments","loadingComment","setLoadingComment","expand","setExpand","_comment_list","sort_comments","delete_comment","fetch_all_comment","toggle_edit_mode","useCommentState","item","author_info","DislikeButton","dislike_arr","Tags","Content","no_content_slice","Post","content_link","UpdatePost","update","font_size","PostList","post_list","post_info","new_post_button","Home","initInput","email","LogIn","effectRef","log_in_submit","SignUp","sign_up_submit","LogInPage","Post404","PostPage","match","params","SinglePost","SettingsButton","UserHeader","settings_event","bio","UploadButton","onUpload","accept","PublicSection","user_pic","user_bio","updateBtn","setUpdateBtn","upload_pic","uploadedFile","files","toBase64","base64","image","pop","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","useUpdatePic","update_pic","updated_pic","update_bio","padding","AccountSection","update_event","PasswordSection","new_password","DeleteSection","showForm","setShowForm","cancel_event","DeleteForm","delete_event","DeleteButton","UserPanel","close_event","section_class","section_name","is_open","component","Section","setOpen","UserPage","userInfo","setUserInfo","editMode","setEditMode","get_user","useUserPageState","Router","exact","path","LoginPage","render","props","defaults","withCredentials","App","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7dcc32da.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport { useCallback } from \"react\";\r\n\r\nexport const useAuth = () => {\r\n  const auth = useCallback(async ({ type, filter, req_obj, password }) => {\r\n    let res = { status: null };\r\n    try {\r\n      switch (type) {\r\n        case \"LOG_IN\":\r\n          return (res = await axios.post(`/auth/login`, req_obj));\r\n        case \"GET_LOGGED\":\r\n          return (res = await axios.get(\"/auth/user/info\"));\r\n        case \"LOG_OUT\":\r\n          return (res = await axios.get(\"/auth/logout\"));\r\n        case \"SIGN_UP\":\r\n          return (res = await axios.post(\"/auth/register\", req_obj));\r\n        case \"UPLOAD_PIC\":\r\n          /* req_obj = { image: base64string } */\r\n          return (res = await axios.post(\"/auth/user/upload\", req_obj));\r\n        /* res = \"image_link\" */\r\n        case \"UPDATE_USER\":\r\n          /* \r\n          filter = \"public\" || \"account\" || \"password\"\r\n          req_obj =>\r\n            ( public ) = { pic : string, bio : string }\r\n            ( account ) = { email : string, user_name : string }\r\n            *( password ) = { old_passwor : string, new_password : string }\r\n            * = all field required\r\n        */\r\n          return (res = await axios.patch(`/auth/user/${filter}`, req_obj));\r\n        case \"DELETE_ACCOUNT\":\r\n          return (res = await axios.delete(`/auth/user/delete/${password}`));\r\n        default:\r\n          return res;\r\n      }\r\n    } catch (err) {\r\n      return (res = err.response);\r\n    }\r\n  }, []);\r\n\r\n  const action = useCallback(async ({ type, filter, req_obj, target_id }) => {\r\n    let res;\r\n    try {\r\n      switch (type) {\r\n        case \"NEW_POST\":\r\n          return (res = await axios.post(\"/auth/post/new\", req_obj));\r\n        case \"UPDATE_POST\":\r\n          /*\r\n          target_id = post_id \r\n          req_obj = { title: string, content : string, tags: [ \"tag\", ... ] }\r\n          */\r\n          return (res = await axios.patch(\r\n            `/auth/post/update/${target_id}`,\r\n            req_obj\r\n          ));\r\n        /* \r\n          res = { ... }\r\n          */\r\n        case \"DELETE_POST\":\r\n          return (res = await axios.delete(`/auth/post/remove/${target_id}`));\r\n        case \"NEW_COMMENT\":\r\n          return (res = await axios.post(\"/auth/comment\", req_obj));\r\n        case \"UPDATE_COMMENT\":\r\n          /*\r\n          target_id = comment_id \r\n          req_obj = { content : string }\r\n          */\r\n          return (res = await axios.patch(\r\n            `/auth/comment/update/${target_id}`,\r\n            req_obj\r\n          ));\r\n        /* \r\n          res = { comment: { ... }, author_info : { ... } }\r\n          */\r\n        case \"DELETE_COMMENT\":\r\n          /* \r\n          target_id = comment_id\r\n          */\r\n          return (res = await axios.delete(\r\n            `/auth/comment/remove/${target_id}`\r\n          ));\r\n        case \"SET_LIKE\":\r\n          /* \r\n          filter = \"post\" || \"comment\"\r\n          req_obj =>\r\n          ( post ) = { target_id : post_id, type : \"up\" || \"down\" }\r\n          ( comment ) = { target_id : comment_id, type : \"up\" }\r\n          */\r\n          return (res = await axios.patch(`/auth/${filter}/like`, req_obj));\r\n        /* \r\n          res =>\r\n          ( post ) = { like : [ \"user_id\", ... ], dislike : [ \"user_id\", ... ] }\r\n          ( comment ) = { like : [ \"user_id\", ... ] }\r\n          */\r\n        default:\r\n          return res;\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      return (res = err.response);\r\n    }\r\n  }, []);\r\n\r\n  return { auth, action };\r\n};\r\n","import { createContext, useCallback, useEffect, useState } from \"react\";\r\nimport { useAuth } from \"./useAuth\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(undefined);\r\n  const [signUp, setSignUp] = useState(false);\r\n  const [newPost, setNewPost] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const { auth } = useAuth();\r\n\r\n  const check_error = (res) => {\r\n    switch (res.status) {\r\n      case 200:\r\n        return false;\r\n      case 400:\r\n        console.warn(\"400 \" + res.statusText);\r\n        console.log(res);\r\n        setErrorMessage(res.data.error_message);\r\n        return true;\r\n      case 401:\r\n        console.warn(\"401 \" + res.statusText);\r\n        setUser(undefined);\r\n        return true;\r\n      case 403:\r\n        console.warn(\"409 \" + res.statusText);\r\n        setErrorMessage(res.data.error_message);\r\n        setUser(undefined);\r\n        return true;\r\n      case 409:\r\n        console.warn(\"404 \" + res.statusText);\r\n        setErrorMessage(res.data.error_message);\r\n        setUser(undefined);\r\n        return true;\r\n      case 500:\r\n        console.warn(\"500 \" + res.statusText);\r\n        setErrorMessage(res.statusText);\r\n        return true;\r\n      default:\r\n        console.warn(\"An unexpected error has occurred\");\r\n        setErrorMessage(\"An unexpected error has occurred\");\r\n        return true;\r\n    }\r\n  };\r\n\r\n  const clear_error_message = useCallback(() => {\r\n    return setErrorMessage(\"\");\r\n  }, []);\r\n\r\n  const log_in = async (req_obj) => {\r\n    /* \r\n      req_obj = { user_name : string , password : string }\r\n    */\r\n    const res = await auth({ type: \"LOG_IN\", req_obj: req_obj });\r\n    if (check_error(res)) return false; // => log in fail\r\n    setUser((user) => (user = res.data.user_info));\r\n    return true; // => log in success\r\n  };\r\n\r\n  const get_logged = useCallback(async () => {\r\n    const res = await auth({ type: \"GET_LOGGED\" });\r\n\r\n    if (check_error(res)) return; // token miss\r\n    return setUser((user) => (user = res.data.user_info)); // => token OK\r\n  }, [auth]);\r\n\r\n  const update_account = async ({ filter, req_obj }) => {\r\n    const res = await auth({\r\n      type: \"UPDATE_USER\",\r\n      filter: filter,\r\n      req_obj: req_obj,\r\n    });\r\n\r\n    if (check_error(res)) return false; // => update fail\r\n    if (filter !== \"public\") {\r\n      return true; // => update success, login required\r\n    }\r\n    setUser((user) => (user = res.data.user_info)); // => OK\r\n    return true; // => update success\r\n  };\r\n\r\n  const sign_up = async (req_obj) => {\r\n    const res = await auth({ type: \"SIGN_UP\", req_obj: req_obj });\r\n    if (check_error(res)) return false; // sign up fail\r\n    return true; // sign up success\r\n  };\r\n\r\n  const log_out = async () => {\r\n    await auth({ type: \"LOG_OUT\" });\r\n    setUser(undefined);\r\n  };\r\n\r\n  const delete_account = async (string) => {\r\n    const res = await auth({ type: \"DELETE_ACCOUNT\", password: string });\r\n    if (check_error(res)) return false; // delete fail\r\n    return true; // delete success\r\n  };\r\n\r\n  useEffect(() => {\r\n    get_logged();\r\n  }, [get_logged]);\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        user,\r\n        setUser,\r\n        update_account,\r\n        delete_account,\r\n        sign_up,\r\n        log_in,\r\n        log_out,\r\n        newPost,\r\n        setNewPost,\r\n        signUp,\r\n        setSignUp,\r\n        clear_error_message,\r\n        errorMessage,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/default_user.b6548aa8.png\";","import { memo } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport default_user from \"../../asset/default_user.png\";\r\n\r\nconst UserPicture = ({ src, user_name, is_link }) => {\r\n  return (\r\n    <>\r\n      {is_link ? (\r\n        <UserPicWithLink src={src} user_name={user_name} />\r\n      ) : (\r\n        <UserPic src={src} />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default memo(UserPicture);\r\n\r\nconst UserPicWithLink = ({ src, user_name }) => {\r\n  return (\r\n    <Link to={`/user/${user_name}`} className=\"user_picture\">\r\n      <img src={src ? src : default_user} alt=\"user\" />\r\n    </Link>\r\n  );\r\n};\r\n\r\nconst UserPic = ({ src }) => {\r\n  return (\r\n    <div className=\"user_picture\">\r\n      <img src={src ? src : default_user} alt=\"user\" />\r\n    </div>\r\n  );\r\n};\r\n","import { useContext } from \"react\";\r\nimport { AuthContext } from \"../../auth/AuthContext\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport UserPicture from \"./UserPicture\";\r\nimport { RiLogoutBoxRLine } from \"react-icons/ri\";\r\n\r\nconst UserButton = ({ user }) => {\r\n  const { log_out } = useContext(AuthContext);\r\n  const history = useHistory();\r\n  const exit = () => {\r\n    history.push(\"/home\");\r\n    log_out();\r\n  };\r\n  return (\r\n    <div className=\"user_button\">\r\n      <UserPicture src={user.pic} is_link={true} user_name={user.user_name} />\r\n      <Link to={`/user/${user.user_name}`}>{user.user_name}</Link>\r\n      <div className=\"exit_button\" onClick={exit}>\r\n        <RiLogoutBoxRLine />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserButton;\r\n","import { useState } from \"react\";\r\n\r\nexport const useInputText = (init) => {\r\n  // init = {[target_name] : target_value, ...}\r\n  const [input, setInput] = useState(init);\r\n  const [error, setError] = useState({});\r\n\r\n  const input_handler = (evt) => {\r\n    evt.preventDefault();\r\n    const name = evt.target.name;\r\n    setInput((input) => (input = { ...input, [name]: evt.target.value }));\r\n  };\r\n\r\n  const check_error = ({ required_field }) => {\r\n    /* function( { required_field : ['target_name', ...] } ) => boolean */\r\n    let output = false; // error => false\r\n    for (let required_field in input) {\r\n      if (input[required_field].trim() === \"\") {\r\n        setError(\r\n          (error) => (error = { ...error, [required_field]: \"required\" })\r\n        );\r\n        output = true; // error => true\r\n      }\r\n    }\r\n    return output;\r\n  };\r\n\r\n  const check_empty_field = (evt) => {\r\n    evt.preventDefault();\r\n    const name = evt.target.name;\r\n    if (input[name] === \"\") {\r\n      return setError((error) => (error = { ...error, [name]: \"required\" }));\r\n    }\r\n  };\r\n\r\n  const clear_error = (evt) => {\r\n    const name = evt.target.name;\r\n    setError({ ...error, [name]: \"\" });\r\n  };\r\n\r\n  return {\r\n    input,\r\n    setInput,\r\n    input_handler,\r\n    check_error,\r\n    clear_error,\r\n    check_empty_field,\r\n    error,\r\n  };\r\n};\r\n","import { useHistory } from \"react-router-dom\";\r\nimport { FiSearch } from \"react-icons/fi\";\r\nimport { useInputText } from \"../../hooks/useInputText\";\r\nimport { useState } from \"react\";\r\n\r\nconst SearchBar = () => {\r\n  const history = useHistory();\r\n  const [isFocus, setIsFocus] = useState(false);\r\n\r\n  const { input_handler, input } = useInputText({ search: \"\" });\r\n\r\n  const search_event = (evt) => {\r\n    evt.preventDefault();\r\n    if (input.search) {\r\n      history.push(`/post/search/title/${input.search}`);\r\n    }\r\n  };\r\n\r\n  const focus_handler = () => {\r\n    if (isFocus) return setIsFocus(\"\");\r\n    return setIsFocus(\"sb_focus\");\r\n  };\r\n\r\n  return (\r\n    <form className={`search_bar_container ${isFocus}`} onSubmit={search_event}>\r\n      <input\r\n        type=\"text\"\r\n        name=\"search\"\r\n        className=\"search_bar\"\r\n        onChange={input_handler}\r\n        value={input.search}\r\n        onFocus={focus_handler}\r\n        onBlur={focus_handler}\r\n      />\r\n      <button type=\"submit\" className=\"submit_search_button\">\r\n        <FiSearch />\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default SearchBar;\r\n","import { Link } from \"react-router-dom\";\r\nimport { VscHome } from \"react-icons/vsc\";\r\nimport UserButton from \"./user/UserButton\";\r\nimport SearchBar from \"./inputs/SearchBar\";\r\n\r\nconst Navbar = ({ user }) => {\r\n  return (\r\n    <header className=\"navbar\">\r\n      <Link to=\"/home\" className=\"home_link\">\r\n        <VscHome />\r\n      </Link>\r\n      <SearchBar />\r\n      {user ? (\r\n        <UserButton user={user} />\r\n      ) : (\r\n        <Link to=\"/login\" className=\"login_link\">\r\n          {\"Log in\"}\r\n        </Link>\r\n      )}\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","import axios from \"axios\";\r\nimport { useCallback } from \"react\";\r\n\r\nexport const useFinder = () => {\r\n  const find = useCallback(async ({ type, target, filter, value }) => {\r\n    let res;\r\n    try {\r\n      switch (type) {\r\n        // POST\r\n        case \"GET_POST\":\r\n          res = await axios.get(`/post/src/`);\r\n          return res;\r\n        case \"SRC_POST\":\r\n          return (res = await axios.get(\r\n            `/post/src/?by=${filter}&value=${value}`\r\n          ));\r\n        // COMMENT\r\n        case \"FETCH_COMMENT\":\r\n          // target = post_id\r\n          return (res = await axios.get(`/comment/${target}`));\r\n        // USER\r\n        case \"GET_USER\":\r\n          return (res = await axios.get(`/user/src/${target}`));\r\n        default:\r\n          return res;\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      return (res = err.response);\r\n    }\r\n  }, []);\r\n\r\n  return { find };\r\n};\r\n","import { useCallback, useEffect, useState } from \"react\";\r\nimport { useAuth } from \"../auth/useAuth\";\r\nimport { useFinder } from \"./useFinder\";\r\n\r\nexport const usePostState = () => {\r\n  const { action } = useAuth();\r\n  const { find } = useFinder();\r\n  const [posts, setPosts] = useState([]);\r\n  const [postInfo, setPostInfo] = useState(null);\r\n  const [edit, setEdit] = useState(\"\");\r\n  const [error, setError] = useState(false);\r\n  const [loadingPost, setLoadingPost] = useState(false);\r\n\r\n  const check_error = (res) => {\r\n    switch (res.status) {\r\n      case 200:\r\n        return false;\r\n      case 401:\r\n        console.warn(\"401 \" + res.statusText);\r\n        setError(res.statusText);\r\n        setPosts([]);\r\n        return true;\r\n      case 404:\r\n        console.warn(\"404 \" + res.statusText);\r\n        setError(res.statusText);\r\n        setPosts([]);\r\n        return true;\r\n      case 500:\r\n        console.warn(\"500 \" + res.statusText);\r\n        setError(res.statusText);\r\n        return true;\r\n      default:\r\n        console.warn(\"An unexpected error has occurred\");\r\n        setError(\"An unexpected error has occurred\");\r\n        return true;\r\n    }\r\n  };\r\n\r\n  const get_posts = useCallback(async () => {\r\n    setLoadingPost(true);\r\n    setError(\"\");\r\n    const res = await find({ type: \"GET_POST\" });\r\n    if (check_error(res)) return setLoadingPost(false);\r\n    setLoadingPost(false);\r\n    return setPosts(res.data);\r\n  }, [find]);\r\n\r\n  const src_posts = useCallback(\r\n    async (filter, value) => {\r\n      setLoadingPost(true);\r\n      setError(\"\");\r\n      const res = await find({\r\n        type: \"SRC_POST\",\r\n        filter: filter,\r\n        value: value,\r\n      });\r\n      if (check_error(res)) return setLoadingPost(false);\r\n      setLoadingPost(false);\r\n      return setPosts(res.data);\r\n    },\r\n    [find]\r\n  );\r\n\r\n  const sumbit_post = async (req_obj) => {\r\n    const res = await action({ type: \"NEW_POST\", req_obj: req_obj });\r\n\r\n    if (check_error(res)) return false; // server error\r\n    const updated_posts = [...posts, res.data];\r\n    setPosts((post) => (post = updated_posts));\r\n    return true;\r\n  };\r\n\r\n  const delete_post = async (post_id) => {\r\n    const res = await action({ type: \"DELETE_POST\", target_id: post_id });\r\n    if (check_error(res)) return; // server error\r\n    // --> OK\r\n    const updated_posts = posts.filter((obj) => obj.post._id !== post_id);\r\n    return setPosts((post) => (post = updated_posts));\r\n  };\r\n\r\n  const update_post = async ({ post_id, req_obj }) => {\r\n    const res = await action({\r\n      type: \"UPDATE_POST\",\r\n      target_id: post_id,\r\n      req_obj: req_obj,\r\n    });\r\n    if (check_error(res)) return false; // server error\r\n    const _post = posts.filter((obj) => obj.post._id === post_id);\r\n    const updated_post = {\r\n      post: res.data,\r\n      comment_list: _post[0].comment_list,\r\n      user_info: _post[0].user_info,\r\n    };\r\n    setPosts(\r\n      posts.map((obj) =>\r\n        obj.post._id === post_id ? (obj = updated_post) : obj\r\n      )\r\n    );\r\n\r\n    return true; // => OK\r\n  };\r\n\r\n  const sort_posts = useCallback((arr_to_sort) => {\r\n    arr_to_sort.sort((a, b) => {\r\n      return new Date(a.post.date) - new Date(b.post.date);\r\n    });\r\n    return setPosts(arr_to_sort);\r\n  }, []);\r\n\r\n  const toggle_edit_post = (post_id) => {\r\n    if (edit) {\r\n      setEdit(\"\");\r\n      return setPostInfo(null);\r\n    }\r\n    const _post = posts.filter((obj) => obj.post._id === post_id);\r\n    setPostInfo((post) => (post = _post[0].post));\r\n\r\n    return setEdit((edit) => (edit = post_id));\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(\"post sorted...\");\r\n    sort_posts(posts);\r\n  }, [posts, sort_posts]);\r\n\r\n  return {\r\n    posts,\r\n    postInfo,\r\n    edit,\r\n    get_posts,\r\n    src_posts,\r\n    sumbit_post,\r\n    update_post,\r\n    sort_posts,\r\n    delete_post,\r\n    toggle_edit_post,\r\n    error,\r\n    loadingPost,\r\n  };\r\n};\r\n","import { CgSpinner } from \"react-icons/cg\";\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"spinner_container\">\r\n      <CgSpinner className=\"spinner\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner;\r\n","import Spinner from \"../../Spinner\";\r\n\r\nconst PostLoading = () => {\r\n  return (\r\n    <div className=\"post_loading\">\r\n      <Spinner />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostLoading;\r\n","import UserPicture from \"../../user/UserPicture\";\r\n\r\nconst AddPostButton = ({ user, setNewPost }) => {\r\n  return (\r\n    <div className=\"add_post_button\">\r\n      <UserPicture src={user.pic} />\r\n      <span onClick={() => setNewPost((state) => !state)}>\r\n        Scrivi un post...\r\n      </span>\r\n      <div />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddPostButton;\r\n","import { useState } from \"react\";\r\n\r\nexport const useInputTag = (init) => {\r\n  const [inputTag, setInputTag] = useState(\"\");\r\n  const [tags, setTags] = useState(init);\r\n  const [tagError, setTagError] = useState(\"\");\r\n  const [ruleWarn, setRuleWarn] = useState(\"\");\r\n\r\n  const input_tag_handler = (evt) => {\r\n    evt.preventDefault();\r\n    // --> clear error message\r\n    if (tagError) setTagError(\"\");\r\n    if (ruleWarn) setRuleWarn(\"\");\r\n    setInputTag((input) => (input = evt.target.value));\r\n  };\r\n\r\n  const submit_tag = (evt) => {\r\n    evt.preventDefault();\r\n    const input_tag = inputTag\r\n      .trim()\r\n      .toLowerCase()\r\n      .replace(/[^A-Z0-9]/gi, \"\");\r\n    // --> clear prev error\r\n    if (tagError) setTagError(\"\");\r\n    if (ruleWarn) setRuleWarn(\"\");\r\n    // --> check\r\n    if (tags.includes(input_tag)) return setRuleWarn(\"Same tag!\");\r\n    if (!input_tag) return setInputTag((input) => (input = \"\"));\r\n    // --> OK\r\n    setInputTag((input) => (input = \"\"));\r\n    return setTags((tags) => (tags = [...tags, input_tag]));\r\n  };\r\n\r\n  const remove_tag = (tag_name) => {\r\n    if (tags.includes(tag_name)) {\r\n      const tag_filtered = tags.filter((tag) => tag !== tag_name);\r\n      return setTags((tags) => (tags = tag_filtered));\r\n    }\r\n  };\r\n\r\n  const check_tags_error = () => {\r\n    if (tags.length === 0) {\r\n      setTagError(\"Required\");\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  return {\r\n    inputTag,\r\n    tags,\r\n    setInputTag,\r\n    input_tag_handler,\r\n    check_tags_error,\r\n    submit_tag,\r\n    remove_tag,\r\n    tagError,\r\n    ruleWarn,\r\n  };\r\n};\r\n","import { memo, useLayoutEffect, useRef, useState } from \"react\";\r\nimport { RiEyeCloseLine, RiEyeLine } from \"react-icons/ri\";\r\nconst InputText = ({\r\n  class_name,\r\n  placeholder,\r\n  value,\r\n  type,\r\n  name,\r\n  label,\r\n  onChange,\r\n  onFocus,\r\n  onBlur,\r\n  error,\r\n  error_message,\r\n}) => {\r\n  // hooks\r\n  const [viewPass, setViewPass] = useState(false);\r\n  const [isFocus, setIsFocus] = useState(false);\r\n  // refs\r\n  let boxRef = useRef(null);\r\n  let labelRef = useRef(null);\r\n  let inputRef = useRef(null);\r\n\r\n  const focus = () => {\r\n    if (isFocus && !inputRef.current.value) return setIsFocus(\"\");\r\n    return setIsFocus(\"focus\");\r\n  };\r\n\r\n  useLayoutEffect(() => {\r\n    let on_fire = inputRef.current === document.activeElement;\r\n    if (label) {\r\n      boxRef.current.style.marginTop = labelRef.current.scrollHeight + \"px\";\r\n\r\n      if (isFocus || on_fire || value || placeholder) {\r\n        labelRef.current.style.setProperty(\"--x\", \"-100%\");\r\n      } else {\r\n        labelRef.current.style.setProperty(\"--x\", \"0\");\r\n      }\r\n    }\r\n  }, [label, isFocus, value, labelRef, boxRef, inputRef, placeholder]);\r\n\r\n  const style = { \"--x\": 0 };\r\n\r\n  return (\r\n    <div\r\n      className={`${class_name ? class_name : \"input\"}_container ${\r\n        error ? \"error\" : \"\"\r\n      }`}\r\n      ref={boxRef}\r\n    >\r\n      {label && (\r\n        <label htmlFor={name} ref={labelRef} style={style}>\r\n          {label}\r\n          {error && (\r\n            <ErrorMessage error={error} error_message={error_message} />\r\n          )}\r\n        </label>\r\n      )}\r\n      <input\r\n        className={`${class_name ? class_name : \"input\"} ${isFocus}`}\r\n        type={viewPass ? \"text\" : type}\r\n        name={name}\r\n        onChange={onChange}\r\n        onFocus={(evt) => {\r\n          onFocus(evt);\r\n          focus();\r\n        }}\r\n        onBlur={(evt) => {\r\n          onBlur(evt);\r\n          focus();\r\n        }}\r\n        value={value}\r\n        placeholder={placeholder}\r\n        ref={inputRef}\r\n      />\r\n\r\n      {type === \"password\" && (\r\n        <span className=\"view_password\" onClick={() => setViewPass(!viewPass)}>\r\n          {viewPass ? <RiEyeLine /> : <RiEyeCloseLine />}\r\n        </span>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(InputText);\r\n\r\nconst ErrorMessage = ({ error, error_message }) => {\r\n  return (\r\n    <span className=\"error_message\">\r\n      {error_message ? error_message : error}\r\n    </span>\r\n  );\r\n};\r\n","import { VscClose } from \"react-icons/vsc\";\r\n\r\nconst InputTag = ({\r\n  onChange,\r\n  onSubmit,\r\n  onFocus,\r\n  onBlur,\r\n  tag_arr,\r\n  onTagClick,\r\n  value,\r\n  error,\r\n  error_message,\r\n  rule_warn,\r\n  rule_warn_message,\r\n}) => {\r\n  return (\r\n    <form\r\n      className={`input_tag_form ${error || rule_warn ? \"error\" : \"\"}`}\r\n      onSubmit={onSubmit}\r\n    >\r\n      <div className=\"input_tag_container\">\r\n        <TagList tag_arr={tag_arr} onTagClick={onTagClick} />\r\n\r\n        <input\r\n          className=\"input_tag\"\r\n          type=\"text\"\r\n          name=\"tag\"\r\n          placeholder=\"Aggiungi tag...\"\r\n          onChange={onChange}\r\n          onFocus={onFocus}\r\n          onBlur={onBlur}\r\n          value={value}\r\n        />\r\n      </div>\r\n      {error && (\r\n        <span className=\"error_message\">\r\n          {error_message ? error_message : error}\r\n        </span>\r\n      )}\r\n      {rule_warn && (\r\n        <span className=\"rule_message\">\r\n          {rule_warn_message ? rule_warn_message : rule_warn}\r\n        </span>\r\n      )}\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default InputTag;\r\n\r\nconst TagList = ({ tag_arr, onTagClick }) => {\r\n  return tag_arr.map((tag) => (\r\n    <div key={tag} className=\"tag\" onClick={() => onTagClick(tag)}>\r\n      {tag}\r\n      <VscClose className=\"remove_tag\" />\r\n    </div>\r\n  ));\r\n};\r\n","import { memo } from \"react\";\r\nimport TextareaAutosize from \"react-textarea-autosize\";\r\n\r\nconst TextArea = ({\r\n  onChange,\r\n  onFocus,\r\n  onBlur,\r\n  value,\r\n  name,\r\n  label,\r\n  placeholder,\r\n  max_length,\r\n  min_rows,\r\n  max_rows,\r\n  error,\r\n  error_message,\r\n}) => {\r\n  return (\r\n    <div className=\"textarea_container\">\r\n      {label && <label htmlFor={name}>{label}</label>}\r\n      <div className=\"textarea_padding\">\r\n        <TextareaAutosize\r\n          className=\"textarea\"\r\n          minRows={min_rows}\r\n          maxRows={max_rows}\r\n          name={name}\r\n          value={value}\r\n          placeholder={placeholder}\r\n          onChange={onChange}\r\n          onFocus={onFocus}\r\n          onBlur={onBlur}\r\n        />\r\n\r\n        {error && (\r\n          <span className=\"error_message\">\r\n            {error_message ? error_message : error}\r\n          </span>\r\n        )}\r\n\r\n        {max_length && (\r\n          <div className=\"counter\">\r\n            <span>{max_length - value.length}</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(TextArea);\r\n","import React, { memo } from \"react\";\r\nimport { VscClose } from \"react-icons/vsc\";\r\nimport { useInputText } from \"../../hooks/useInputText\";\r\nimport { useInputTag } from \"../../hooks/useInputTag\";\r\nimport InputText from \"../inputs/InputText\";\r\nimport InputTag from \"../inputs/InputTag\";\r\nimport TextArea from \"../inputs/TextArea\";\r\nimport UserPicture from \"../user/UserPicture\";\r\n\r\nconst NewPost = ({ user, sumbit_post, open, server_error }) => {\r\n  const {\r\n    inputTag,\r\n    tags,\r\n    setInputTag,\r\n    input_tag_handler,\r\n    check_tags_error,\r\n    submit_tag,\r\n    remove_tag,\r\n    tagError,\r\n    ruleWarn,\r\n  } = useInputTag([]);\r\n  const { input, setInput, input_handler, check_error, clear_error, error } =\r\n    useInputText({\r\n      title: \"\",\r\n      content: \"\",\r\n    });\r\n\r\n  const publish = async () => {\r\n    const text_err = check_error({ required_field: [\"title\", \"content\"] });\r\n    const tags_err = check_tags_error();\r\n    if (!text_err && !tags_err) {\r\n      //--> ALL FIELD CORRECT\r\n      const req_obj = {\r\n        title: input.title.trim(),\r\n        content: input.content.trim(),\r\n        tags: tags,\r\n      };\r\n      if (await sumbit_post(req_obj)) {\r\n        // --> OK\r\n        return open(false);\r\n      }\r\n      // --> SERVER ERROR\r\n      console.warn(server_error);\r\n    }\r\n  };\r\n\r\n  const close_window = () => {\r\n    setInputTag([]);\r\n    setInput({\r\n      title: \"\",\r\n      content: \"\",\r\n    });\r\n    open(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"new_post_container\">\r\n      <div className=\"new_post\">\r\n        <div className=\"head\">\r\n          <UserPicture src={user.pic} />\r\n          <strong>Crea post</strong>\r\n          <div className=\"close_button\" onClick={close_window}>\r\n            <VscClose />\r\n          </div>\r\n        </div>\r\n        <div className=\"scroll_container\">\r\n          <div className=\"form_ctrl\">\r\n            <InputText\r\n              name=\"title\"\r\n              label=\"Titolo:\"\r\n              value={input.title}\r\n              onChange={input_handler}\r\n              onFocus={clear_error}\r\n              onBlur={clear_error}\r\n              error={error.title}\r\n              error_message=\"Richiesto\"\r\n            />\r\n            <TextArea\r\n              name=\"content\"\r\n              placeholder=\"Scrivi post...\"\r\n              value={input.content}\r\n              onChange={input_handler}\r\n              onFocus={clear_error}\r\n              error={error.content}\r\n              error_message=\"Il post è vuoto...\"\r\n              min_rows={10}\r\n              max_rows={50}\r\n            />\r\n            <InputTag\r\n              name=\"tag\"\r\n              tag_arr={tags}\r\n              onChange={input_tag_handler}\r\n              onSubmit={submit_tag}\r\n              onTagClick={remove_tag}\r\n              value={inputTag}\r\n              error={tagError}\r\n              error_message=\"Mi serve almeno un Tag\"\r\n              rule_warn={ruleWarn}\r\n              rule_warn_message=\"Tag già inserito\"\r\n            />\r\n          </div>\r\n          {server_error && (\r\n            <span className=\"err_message\">\r\n              {\"Si è verificato un errore imprevisto\"}\r\n            </span>\r\n          )}\r\n        </div>\r\n        <button className=\"submit_post_button\" onClick={publish}>\r\n          Pubblica\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(NewPost);\r\n","import { useEffect, useState } from \"react\";\r\n\r\nexport const useMatchUser = (obj) => {\r\n  const [matched, setMatched] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (obj.id === obj.target_id) {\r\n      return setMatched(true);\r\n    }\r\n    return setMatched(false);\r\n  }, [obj]);\r\n\r\n  return [matched];\r\n};\r\n","import { memo } from \"react\";\r\nimport { useInputText } from \"../../../hooks/useInputText\";\r\nimport TextArea from \"../../inputs/TextArea\";\r\nimport UserPicture from \"../../user/UserPicture\";\r\n\r\nconst AddComment = ({ user, post_id, submit_comment }) => {\r\n  const { input, setInput, input_handler } = useInputText({\r\n    content: \"\",\r\n    post_id: post_id,\r\n  });\r\n\r\n  const publish_comment = (evt) => {\r\n    evt.preventDefault();\r\n    submit_comment(input);\r\n    setInput({\r\n      content: \"\",\r\n      post_id: post_id,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"add_comment\">\r\n      <UserPicture src={user.pic} />\r\n      <form className=\"form_ctrl\" onSubmit={publish_comment}>\r\n        <TextArea\r\n          name=\"content\"\r\n          placeholder=\"Scrivi un commento...\"\r\n          value={input.content}\r\n          onChange={input_handler}\r\n          min_rows={1}\r\n          max_rows={50}\r\n        />\r\n        {input.content && (\r\n          <button className={`submit_comment_button`} type=\"submit\">\r\n            INVIA\r\n          </button>\r\n        )}\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(AddComment);\r\n","import { useState } from \"react\";\r\nimport { HiOutlineDotsHorizontal } from \"react-icons/hi\";\r\n\r\nconst OptionButton = ({\r\n  target_name,\r\n  target_id,\r\n  option_delete,\r\n  option_edit,\r\n}) => {\r\n  const [active, setActive] = useState(\"\");\r\n  const [confirm, setConfirm] = useState(false);\r\n  return (\r\n    <>\r\n      <div className={`option_button ${active}`}>\r\n        <HiOutlineDotsHorizontal\r\n          onClick={() => setActive(active ? \"\" : \"open\")}\r\n        />\r\n        {active && (\r\n          <div className=\"option_list\">\r\n            {confirm ? (\r\n              <div className=\"confirm_delete\">\r\n                <span>Conferma elimina</span>\r\n                <div>\r\n                  <span className=\"cancel\" onClick={() => setConfirm(false)}>\r\n                    Annulla\r\n                  </span>\r\n                  <span\r\n                    className=\"confirm\"\r\n                    onClick={() => option_delete(target_id)}\r\n                  >\r\n                    OK\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <>\r\n                <span\r\n                  className=\"option\"\r\n                  onClick={() => {\r\n                    option_edit(target_id);\r\n                    setActive(\"\");\r\n                  }}\r\n                >{`Modifica ${target_name}`}</span>\r\n                <span className=\"option\" onClick={() => setConfirm(true)}>\r\n                  {`Elimina ${target_name}`}\r\n                </span>\r\n              </>\r\n            )}\r\n          </div>\r\n        )}\r\n        {active && (\r\n          <div\r\n            className=\"trigger\"\r\n            onClick={() => {\r\n              setActive(\"\");\r\n              setConfirm(false);\r\n            }}\r\n          ></div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OptionButton;\r\n","import { memo } from \"react\";\r\nimport { useInputText } from \"../../../hooks/useInputText\";\r\nimport TextArea from \"../../inputs/TextArea\";\r\n\r\nconst EditComment = ({ comment_id, update_comment, content, option_edit }) => {\r\n  const { input, input_handler } = useInputText({\r\n    content: content,\r\n  });\r\n\r\n  const edit_comment = async (evt) => {\r\n    evt.preventDefault();\r\n    if (await update_comment({ req_obj: input, comment_id: comment_id })) {\r\n      return option_edit();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form className=\"form_ctrl\" onSubmit={edit_comment}>\r\n      <TextArea\r\n        name=\"content\"\r\n        placeholder=\"Scrivi un commento...\"\r\n        value={input.content}\r\n        onChange={input_handler}\r\n      />\r\n      {input.content && (\r\n        <div className=\"button_container\">\r\n          <button className={`cancel_button`} onClick={option_edit}>\r\n            ANNULLA\r\n          </button>\r\n          <button className={`update_button`} type=\"submit\">\r\n            INVIA\r\n          </button>\r\n        </div>\r\n      )}\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default memo(EditComment);\r\n","import { useCallback, useState } from \"react\";\r\nimport { useAuth } from \"../auth/useAuth\";\r\n\r\nexport const useLikeHandler = (target) => {\r\n  const { action } = useAuth();\r\n  const [like, setLike] = useState(target.likes);\r\n  const [dislike, setDislike] = useState(target.dislikes);\r\n\r\n  const set_like = useCallback(\r\n    async ({ target_id, target_type, type }) => {\r\n      console.log(\"set like fired\");\r\n      const req_obj = {\r\n        target_id: target_id,\r\n        type: type,\r\n      };\r\n      const res = await action({\r\n        type: \"SET_LIKE\",\r\n        filter: target_type,\r\n        req_obj: req_obj,\r\n      });\r\n      // --> non autorizzato\r\n      if (res.status !== 200) return console.log(\"unauthorized\");\r\n      if (target_type === \"post\") {\r\n        setDislike(res.data.dislike);\r\n        return setLike(res.data.like);\r\n      }\r\n      return setLike(res.data.like);\r\n    },\r\n    [action]\r\n  );\r\n\r\n  return { like, dislike, set_like };\r\n};\r\n","import { memo, useContext, useEffect, useState } from \"react\";\r\nimport { VscThumbsup } from \"react-icons/vsc\";\r\nimport { AuthContext } from \"../../../auth/AuthContext\";\r\n\r\nconst LikeButton = ({ like_arr, onClick }) => {\r\n  const { user } = useContext(AuthContext);\r\n  const [active, setActive] = useState(\"\");\r\n  useEffect(() => {\r\n    if (!user) return;\r\n    if (like_arr.includes(user.id)) {\r\n      setActive(\"liked\");\r\n    } else {\r\n      setActive(\"\");\r\n    }\r\n  }, [like_arr, user]);\r\n  return (\r\n    // need switch\r\n    <div className={`like_button ${active}`} onClick={onClick}>\r\n      <span className=\"like_count\">\r\n        <VscThumbsup />\r\n        <span>{like_arr.length}</span>\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(LikeButton);\r\n","import { useLikeHandler } from \"../../../hooks/useLikeHandler\";\r\nimport LikeButton from \"../detail/LikeButton\";\r\n\r\nconst LikeContainer = ({ comment }) => {\r\n  const { like, set_like } = useLikeHandler({\r\n    likes: comment.like,\r\n  });\r\n\r\n  return (\r\n    <div className=\"like_container\">\r\n      <LikeButton\r\n        like_arr={like}\r\n        onClick={() =>\r\n          set_like({\r\n            target_id: comment._id,\r\n            type: \"like\",\r\n            target_type: \"comment\",\r\n          })\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LikeContainer;\r\n","import { useEffect, useRef, useState } from \"react\";\r\n\r\nconst CommentContent = ({ text }) => {\r\n  const contentRef = useRef();\r\n  const [expandText, setExpandTest] = useState(false);\r\n  const [link, setLink] = useState(false);\r\n  let line_text = text.split(/\\n/);\r\n\r\n  const expand_text = () => {\r\n    setExpandTest(true);\r\n    setLink(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let current_text = text;\r\n\r\n    if (line_text.length > 5 && !expandText) {\r\n      current_text = line_text.slice(0, 5).join(\"\\n\");\r\n      if (current_text.length > 250) {\r\n        current_text = current_text.slice(0, 250);\r\n      }\r\n      setLink((state) => (state = true));\r\n      return (contentRef.current.textContent = current_text + \"...\");\r\n    }\r\n    if (current_text.length > 250) {\r\n      current_text = current_text.slice(0, 250);\r\n      setLink((state) => (state = true));\r\n      return (contentRef.current.textContent = current_text + \"...\");\r\n    }\r\n\r\n    return (contentRef.current.textContent = current_text);\r\n  }, [text, line_text, expandText]);\r\n\r\n  return (\r\n    <span>\r\n      <p className=\"text_content\" ref={contentRef}></p>\r\n      {link && (\r\n        <span className=\"content_link\" onClick={expand_text}>\r\n          {\"Continua\"}\r\n        </span>\r\n      )}\r\n    </span>\r\n  );\r\n};\r\n\r\nexport default CommentContent;\r\n","import { memo } from \"react\";\r\nimport { useMatchUser } from \"../../../hooks/useMatchUser\";\r\nimport UserPicture from \"../../user/UserPicture\";\r\nimport OptionButton from \"../../buttons/OptionButton\";\r\nimport EditComment from \"./EditComment\";\r\nimport LikeContainer from \"./LikeContainer\";\r\nimport CommentContent from \"./CommentContent\";\r\nconst Comment = ({\r\n  comment,\r\n  author,\r\n  user,\r\n  update_comment,\r\n  option_delete,\r\n  option_edit,\r\n  edit_mode,\r\n}) => {\r\n  const [matched] = useMatchUser({\r\n    id: user ? user.id : \"\",\r\n    target_id: comment.user_id,\r\n  });\r\n\r\n  const convert_date = (date) => {\r\n    let _date = new Date(date);\r\n    let options = {\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n    };\r\n    return _date.toLocaleDateString(\"it-IT\", options);\r\n  };\r\n\r\n  return (\r\n    <div className=\"comment_container\">\r\n      <UserPicture\r\n        src={author.thumbnail}\r\n        user_name={author.user_name}\r\n        is_link={true}\r\n      />\r\n      <div className=\"comment_content\">\r\n        <div className=\"comment_head\">\r\n          <strong>{author.user_name}</strong>\r\n          <span className=\"date\">{convert_date(comment.date)}</span>\r\n          {matched && (\r\n            <OptionButton\r\n              target_name=\"commento\"\r\n              target_id={comment._id}\r\n              option_delete={option_delete}\r\n              option_edit={option_edit}\r\n            />\r\n          )}\r\n        </div>\r\n        {comment._id === edit_mode ? (\r\n          <EditComment\r\n            comment_id={comment._id}\r\n            content={comment.content}\r\n            update_comment={update_comment}\r\n            option_edit={option_edit}\r\n          />\r\n        ) : (\r\n          <CommentContent text={comment.content} />\r\n        )}\r\n\r\n        {comment._id === edit_mode || <LikeContainer comment={comment} />}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(Comment);\r\n","import Spinner from \"../../Spinner\";\r\n\r\nconst ExpandComment = ({ expand_event, comment_count, post_id, loading }) => {\r\n  return (\r\n    <div onClick={() => expand_event(post_id)} className=\"expand_comment\">\r\n      {loading && <Spinner />}\r\n      {comment_count < 2 ? (\r\n        <span>Visualizza altri commenti </span>\r\n      ) : (\r\n        <span>{`Visualizza altri ${comment_count} commenti`}</span>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ExpandComment;\r\n","import { memo } from \"react\";\r\nimport { useCommentState } from \"../../../hooks/useCommentState\";\r\nimport { Link } from \"react-router-dom\";\r\nimport AddComment from \"./AddComment\";\r\nimport Comment from \"./Comment\";\r\nimport ExpandComment from \"./ExpandComment\";\r\n\r\nconst CommentList = ({ user, comment_list, comment_remain, post_id }) => {\r\n  const {\r\n    comments,\r\n    edit,\r\n    expand,\r\n    submit_comment,\r\n    update_comment,\r\n    delete_comment,\r\n    toggle_edit_mode,\r\n    fetch_all_comment,\r\n    loadingComment,\r\n  } = useCommentState(comment_list);\r\n\r\n  return (\r\n    <div className=\"comment_list\">\r\n      {comments.map((item) => (\r\n        <Comment\r\n          key={item.comment._id}\r\n          comment={item.comment}\r\n          user={user}\r\n          author={item.author_info}\r\n          update_comment={update_comment}\r\n          option_delete={delete_comment}\r\n          option_edit={toggle_edit_mode}\r\n          edit_mode={edit}\r\n        />\r\n      ))}\r\n      {comment_remain > 0 && !expand && (\r\n        <ExpandComment\r\n          expand_event={fetch_all_comment}\r\n          comment_count={comment_remain}\r\n          post_id={post_id}\r\n          loading={loadingComment}\r\n        />\r\n      )}\r\n\r\n      {user ? (\r\n        <AddComment\r\n          user={user}\r\n          post_id={post_id}\r\n          submit_comment={submit_comment}\r\n        />\r\n      ) : (\r\n        <Link to=\"/login\" className=\"text_right\">\r\n          Effettua il login per commentare\r\n        </Link>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(CommentList);\r\n","import { useCallback, useEffect, useState } from \"react\";\r\nimport { useAuth } from \"../auth/useAuth\";\r\nimport { useFinder } from \"./useFinder\";\r\n\r\nexport const useCommentState = (init) => {\r\n  const { action } = useAuth();\r\n  const { find } = useFinder();\r\n  const [comments, setComments] = useState(init);\r\n  const [loadingComment, setLoadingComment] = useState(false);\r\n\r\n  const [edit, setEdit] = useState(\"\");\r\n  const [error, setError] = useState(false);\r\n  // if comment_list > 1\r\n  const [expand, setExpand] = useState(false);\r\n\r\n  const check_error = (res) => {\r\n    switch (res.status) {\r\n      case 200:\r\n        return false;\r\n      case 401:\r\n        console.warn(\"401 \" + res.statusText);\r\n        setError(res.statusText);\r\n        setComments([]);\r\n        return true;\r\n      case 404:\r\n        console.warn(\"404 \" + res.statusText);\r\n        setError(res.statusText);\r\n        setComments([]);\r\n        return true;\r\n      case 500:\r\n        console.warn(\"500 \" + res.statusText);\r\n        setError(res.statusText);\r\n        return true;\r\n      default:\r\n        console.warn(\"An unexpected error has occurred\");\r\n        setError(\"An unexpected error has occurred\");\r\n        return true;\r\n    }\r\n  };\r\n\r\n  /* \r\n    NEW COMMENT\r\n  */\r\n\r\n  const submit_comment = async (req_obj) => {\r\n    const res = await action({ type: \"NEW_COMMENT\", req_obj });\r\n    if (check_error(res)) return; // fail\r\n    const _comment_list = [...comments, res.data];\r\n    return sort_comments(_comment_list);\r\n  };\r\n\r\n  /* \r\n    UPDATE COMMENT\r\n  */\r\n\r\n  const update_comment = async ({ req_obj, comment_id }) => {\r\n    const res = await action({\r\n      type: \"UPDATE_COMMENT\",\r\n      req_obj: req_obj,\r\n      target_id: comment_id,\r\n    });\r\n    if (check_error(res)) return false; // => fail\r\n    const _comment_list = comments.map((obj) =>\r\n      obj.comment._id === comment_id ? (obj = res.data) : obj\r\n    );\r\n    sort_comments(_comment_list);\r\n    return true; // => OK\r\n  };\r\n\r\n  /* \r\n    DELETE COMMENT\r\n  */\r\n\r\n  const delete_comment = async (comment_id) => {\r\n    const res = await action({ type: \"DELETE_COMMENT\", target_id: comment_id });\r\n\r\n    if (check_error(res)) return; // fail\r\n\r\n    const _comment_list = comments.filter(\r\n      (obj) => obj.comment._id !== comment_id\r\n    );\r\n    return sort_comments(_comment_list);\r\n  };\r\n\r\n  /* \r\n   SORT COMMENT\r\n  */\r\n\r\n  const sort_comments = useCallback((arr_to_sort) => {\r\n    arr_to_sort.sort((a, b) => {\r\n      return new Date(a.comment.date) - new Date(b.comment.date);\r\n    });\r\n    return setComments(arr_to_sort);\r\n  }, []);\r\n\r\n  const toggle_edit_mode = (comment_id) => {\r\n    if (edit) return setEdit((edit) => (edit = \"\"));\r\n    return setEdit((edit) => (edit = comment_id));\r\n  };\r\n\r\n  /* \r\n    FETCH ALL COMMENT\r\n  */\r\n\r\n  const fetch_all_comment = async (post_id) => {\r\n    setLoadingComment(true);\r\n    const res = await find({ type: \"FETCH_COMMENT\", target: post_id });\r\n    if (check_error(res)) return setLoadingComment(false); // fail\r\n    setLoadingComment(false);\r\n    sort_comments(res.data);\r\n    return setExpand((expand) => !expand);\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(\"comment_sorted\");\r\n    sort_comments(init);\r\n  }, [sort_comments, init]);\r\n\r\n  return {\r\n    comments,\r\n    expand,\r\n    edit,\r\n    error,\r\n    submit_comment,\r\n    update_comment,\r\n    delete_comment,\r\n    toggle_edit_mode,\r\n    fetch_all_comment,\r\n    loadingComment,\r\n  };\r\n};\r\n","import { useContext, useEffect, useState } from \"react\";\r\nimport { VscThumbsdown } from \"react-icons/vsc\";\r\nimport { AuthContext } from \"../../../auth/AuthContext\";\r\n\r\nconst DislikeButton = ({ dislike_arr, onClick }) => {\r\n  const { user } = useContext(AuthContext);\r\n  const [active, setActive] = useState(\"\");\r\n  useEffect(() => {\r\n    if (!user) return;\r\n    if (dislike_arr.includes(user.id)) {\r\n      setActive(\"disliked\");\r\n    } else {\r\n      setActive(\"\");\r\n    }\r\n  }, [dislike_arr, user]);\r\n  return (\r\n    // need switch\r\n    <div className={`dislike_button ${active}`} onClick={onClick}>\r\n      <span className=\"like_count\">\r\n        <VscThumbsdown />\r\n        {dislike_arr.length}\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DislikeButton;\r\n","import { useLikeHandler } from \"../../../hooks/useLikeHandler\";\r\nimport DislikeButton from \"./DislikeButton\";\r\nimport LikeButton from \"./LikeButton\";\r\n\r\nconst LikeContainer = ({ post }) => {\r\n  const { like, dislike, set_like } = useLikeHandler({\r\n    likes: post.like,\r\n    dislikes: post.dislike,\r\n  });\r\n  return (\r\n    <div className=\"like_container\">\r\n      <LikeButton\r\n        like_arr={like}\r\n        onClick={() =>\r\n          set_like({\r\n            target_id: post._id,\r\n            type: \"like\",\r\n            target_type: \"post\",\r\n          })\r\n        }\r\n      />\r\n      <DislikeButton\r\n        dislike_arr={dislike}\r\n        onClick={() =>\r\n          set_like({\r\n            target_id: post._id,\r\n            type: \"dislike\",\r\n            target_type: \"post\",\r\n          })\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LikeContainer;\r\n","import { Link } from \"react-router-dom\";\r\n\r\nconst Tags = ({ tag_arr }) => {\r\n  return (\r\n    <div className=\"tag_container\">\r\n      {tag_arr.map((tag) => (\r\n        <Link to={`/post/search/tags/${tag}`} key={tag} className=\"tag\">\r\n          {tag}\r\n        </Link>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Tags;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Content = ({ text, post_id, no_content_slice, is_link }) => {\r\n  const contentRef = useRef();\r\n  const [expandText, setExpandTest] = useState(false);\r\n  const [link, setLink] = useState(false);\r\n  let line_text = text.split(/\\n/);\r\n\r\n  const expand_text = () => {\r\n    setExpandTest(true);\r\n    setLink(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let current_text = text;\r\n    if (no_content_slice) {\r\n      return (contentRef.current.textContent = current_text);\r\n    }\r\n\r\n    if (line_text.length > 5 && !expandText) {\r\n      current_text = line_text.slice(0, 5).join(\"\\n\");\r\n      if (current_text.length > 500) {\r\n        current_text = current_text.slice(0, 500);\r\n      }\r\n      setLink((state) => (state = true));\r\n      return (contentRef.current.textContent = current_text + \"...\");\r\n    }\r\n    if (current_text.length > 500 && !expandText) {\r\n      current_text = current_text.slice(0, 500);\r\n      setLink((state) => (state = true));\r\n      return (contentRef.current.textContent = current_text + \"...\");\r\n    }\r\n\r\n    return (contentRef.current.textContent = current_text);\r\n  }, [text, line_text, no_content_slice, expandText]);\r\n\r\n  return (\r\n    <span>\r\n      <p className=\"text_content\" ref={contentRef}></p>\r\n      {is_link\r\n        ? link && (\r\n            <Link className=\"content_link\" to={`/post/${post_id}`}>\r\n              {\"Continua\"}\r\n            </Link>\r\n          )\r\n        : link && (\r\n            <span className=\"content_link\" onClick={expand_text}>\r\n              {\"Continua\"}\r\n            </span>\r\n          )}\r\n    </span>\r\n  );\r\n};\r\n\r\nexport default Content;\r\n","import { useMatchUser } from \"../../hooks/useMatchUser\";\r\nimport UserPicture from \"../user/UserPicture\";\r\nimport CommentList from \"./comment/CommentList\";\r\nimport LikeContainer from \"./detail/LikeContainer\";\r\nimport OptionButton from \"../buttons/OptionButton\";\r\nimport Tags from \"./detail/Tags\";\r\nimport { memo, useEffect } from \"react\";\r\nimport Content from \"./detail/Content\";\r\n\r\nconst Post = ({\r\n  user,\r\n  post,\r\n  author,\r\n  comment_list,\r\n  comment_remain,\r\n  option_edit,\r\n  option_delete,\r\n  no_content_slice,\r\n  content_link,\r\n}) => {\r\n  const [matched] = useMatchUser({\r\n    id: user ? user.id : \"\",\r\n    target_id: post.user_id,\r\n  });\r\n\r\n  const convert_date = (date) => {\r\n    let _date = new Date(date);\r\n    let options = {\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n    };\r\n    return _date.toLocaleDateString(\"it-IT\", options);\r\n  };\r\n\r\n  return (\r\n    <div className=\"post_container\">\r\n      <div className=\"post\">\r\n        <div className=\"post_head\">\r\n          <UserPicture\r\n            src={author.thumbnail}\r\n            user_name={author.user_name}\r\n            is_link={true}\r\n          />\r\n          <div>\r\n            <strong>{author.user_name}</strong>\r\n            <span className=\"date\">{convert_date(post.date)}</span>\r\n          </div>\r\n          {matched && (\r\n            <OptionButton\r\n              target_name=\"post\"\r\n              target_id={post._id}\r\n              option_delete={option_delete}\r\n              option_edit={option_edit}\r\n            />\r\n          )}\r\n        </div>\r\n        <article className=\"post_content\">\r\n          <h2>{post.title}</h2>\r\n          <Content\r\n            text={post.content}\r\n            post_id={post._id}\r\n            no_content_slice={no_content_slice}\r\n            is_link={content_link}\r\n          />\r\n        </article>\r\n        <Tags tag_arr={post.tags} />\r\n        <LikeContainer post={post} />\r\n      </div>\r\n      <CommentList\r\n        key={post._id}\r\n        post_id={post._id}\r\n        comment_list={comment_list}\r\n        comment_remain={comment_remain}\r\n        user={user}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(Post);\r\n","import React, { memo } from \"react\";\r\nimport { VscClose } from \"react-icons/vsc\";\r\nimport { useInputText } from \"../../hooks/useInputText\";\r\nimport { useInputTag } from \"../../hooks/useInputTag\";\r\nimport InputTag from \"../inputs/InputTag\";\r\nimport TextArea from \"../inputs/TextArea\";\r\nimport UserPicture from \"../user/UserPicture\";\r\nimport InputText from \"../inputs/InputText\";\r\n\r\nconst UpdatePost = ({\r\n  user,\r\n  update_post,\r\n  post,\r\n  toggle_edit_post,\r\n  server_error,\r\n}) => {\r\n  const {\r\n    inputTag,\r\n    tags,\r\n    input_tag_handler,\r\n    check_tags_error,\r\n    submit_tag,\r\n    remove_tag,\r\n    tagError,\r\n    ruleWarn,\r\n  } = useInputTag(post.tags ? post.tags : []);\r\n  const { input, input_handler, check_error, clear_error, error } =\r\n    useInputText({\r\n      title: post.title,\r\n      content: post.content,\r\n    });\r\n\r\n  const update = async () => {\r\n    const text_err = check_error({ required_field: [\"title\", \"content\"] });\r\n    const tags_err = check_tags_error();\r\n    if (!text_err && !tags_err) {\r\n      //--> ALL FIELD CORRECT\r\n      const req_obj = {\r\n        title: input.title.trim(),\r\n        content: input.content.trim(),\r\n        tags: tags,\r\n      };\r\n      if (await update_post({ req_obj: req_obj, post_id: post._id }))\r\n        return toggle_edit_post();\r\n      // => ERROR\r\n      return console.warn(server_error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"new_post_container\">\r\n      <div className=\"new_post\">\r\n        <div className=\"head\">\r\n          <UserPicture src={user.pic} />\r\n          <strong>Modifica post</strong>\r\n          <div className=\"close_button\" onClick={toggle_edit_post}>\r\n            <VscClose />\r\n          </div>\r\n        </div>\r\n        <div className=\"scroll_container\">\r\n          <div className=\"form_ctrl\">\r\n            <InputText\r\n              name=\"title\"\r\n              label=\"Titolo:\"\r\n              value={input.title}\r\n              onChange={input_handler}\r\n              onFocus={clear_error}\r\n              onBlur={clear_error}\r\n              error={error.title}\r\n              error_message=\"Richiesto\"\r\n            />\r\n            <TextArea\r\n              name=\"content\"\r\n              placeholder=\"Scrivi post...\"\r\n              font_size={16}\r\n              value={input.content}\r\n              onChange={input_handler}\r\n              onFocus={clear_error}\r\n              error={error.content}\r\n              error_message=\"Il post è vuoto...\"\r\n              min_rows={10}\r\n              max_rows={50}\r\n            />\r\n            <InputTag\r\n              name=\"tag\"\r\n              tag_arr={tags}\r\n              onChange={input_tag_handler}\r\n              onSubmit={submit_tag}\r\n              onTagClick={remove_tag}\r\n              value={inputTag}\r\n              error={tagError}\r\n              error_message=\"Mi serve almeno un Tag\"\r\n              rule_warn={ruleWarn}\r\n              rule_warn_message=\"Tag già inserito\"\r\n            />\r\n          </div>\r\n          {server_error && (\r\n            <span className=\"err_message\">\r\n              {\"Si è verificato un errore imprevisto\"}\r\n            </span>\r\n          )}\r\n        </div>\r\n        <button className=\"submit_post_button\" onClick={update}>\r\n          Aggiorna Modifiche\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(UpdatePost);\r\n","import { useContext } from \"react\";\r\nimport { AuthContext } from \"../../auth/AuthContext\";\r\nimport AddPostButton from \"./detail/AddPostButton\";\r\nimport NewPost from \"./NewPost\";\r\nimport Post from \"./Post\";\r\nimport UpdatePost from \"./UpdatePost\";\r\n\r\nconst PostList = ({\r\n  post_list,\r\n  post_info,\r\n  sumbit_post,\r\n  update_post,\r\n  toggle_edit_post,\r\n  delete_post,\r\n  matched,\r\n  edit,\r\n  server_error,\r\n  no_content_slice,\r\n  new_post_button,\r\n  content_link,\r\n}) => {\r\n  const { user, newPost, setNewPost } = useContext(AuthContext);\r\n\r\n  return (\r\n    <>\r\n      {newPost && (\r\n        <NewPost\r\n          user={user}\r\n          sumbit_post={sumbit_post}\r\n          open={setNewPost}\r\n          server_error={server_error}\r\n        />\r\n      )}\r\n      {edit && (\r\n        <UpdatePost\r\n          user={user}\r\n          post={post_info}\r\n          update_post={update_post}\r\n          server_error={server_error}\r\n          toggle_edit_post={toggle_edit_post}\r\n        />\r\n      )}\r\n      <main className=\"post_list\">\r\n        {user && matched && new_post_button && (\r\n          <AddPostButton user={user} setNewPost={setNewPost} />\r\n        )}\r\n        {post_list.length > 0 ? (\r\n          post_list.map((post) => (\r\n            <Post\r\n              key={post.post._id}\r\n              post={post.post}\r\n              author={post.user_info}\r\n              comment_list={post.comment_list}\r\n              comment_remain={post.comment_remain}\r\n              option_delete={delete_post}\r\n              option_edit={toggle_edit_post}\r\n              user={user}\r\n              no_content_slice={no_content_slice}\r\n              content_link={content_link}\r\n            />\r\n          ))\r\n        ) : (\r\n          <span className=\"no_post\">Ancora nessun post...</span>\r\n        )}\r\n      </main>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PostList;\r\n","import { useEffect } from \"react\";\r\nimport { usePostState } from \"../../hooks/usePostState\";\r\nimport PostLoading from \"../posts/detail/PostLoading\";\r\nimport PostList from \"../posts/PostList\";\r\n\r\nconst Home = ({ user }) => {\r\n  const {\r\n    posts,\r\n    postInfo,\r\n    edit,\r\n    get_posts,\r\n    sumbit_post,\r\n    delete_post,\r\n    update_post,\r\n    toggle_edit_post,\r\n    error,\r\n    loadingPost,\r\n  } = usePostState();\r\n\r\n  useEffect(() => {\r\n    console.log(\"getting post...\");\r\n    get_posts();\r\n  }, [get_posts]);\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      {loadingPost ? (\r\n        <PostLoading />\r\n      ) : (\r\n        <PostList\r\n          post_list={posts}\r\n          post_info={postInfo}\r\n          sumbit_post={sumbit_post}\r\n          update_post={update_post}\r\n          delete_post={delete_post}\r\n          user={user}\r\n          matched={true}\r\n          toggle_edit_post={toggle_edit_post}\r\n          edit={edit}\r\n          server_error={error}\r\n          new_post_button={true}\r\n          content_link={true}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import { useContext, useEffect, useRef } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../auth/AuthContext\";\r\nimport { useInputText } from \"../../hooks/useInputText\";\r\nimport InputText from \"../inputs/InputText\";\r\n\r\nconst initInput = {\r\n  email: \"\",\r\n  password: \"\",\r\n};\r\n\r\nconst LogIn = ({ setSignUp }) => {\r\n  const history = useHistory();\r\n  const effectRef = useRef(false);\r\n  const { user, log_in, errorMessage } = useContext(AuthContext);\r\n  const {\r\n    input,\r\n    setInput,\r\n    input_handler,\r\n    check_error,\r\n    clear_error,\r\n    check_empty_field,\r\n    error,\r\n  } = useInputText(initInput);\r\n\r\n  const log_in_submit = async (evt) => {\r\n    evt.preventDefault();\r\n    if (check_error({ required_field: [\"email\", \"password\"] })) return;\r\n    if (await log_in(input)) {\r\n      effectRef.current = true;\r\n      return setInput(initInput);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user && effectRef.current) {\r\n      history.push(`/user/${user.user_name}`);\r\n    }\r\n  }, [user, history]);\r\n\r\n  return (\r\n    <div className=\"form_container\">\r\n      <div className=\"head\">\r\n        <strong className=\"title\">Accedi</strong>\r\n      </div>\r\n      <form className=\"form_ctrl\" onSubmit={log_in_submit}>\r\n        <InputText\r\n          type=\"email\"\r\n          name=\"email\"\r\n          label=\"Email:\"\r\n          value={input.email}\r\n          onChange={input_handler}\r\n          onFocus={clear_error}\r\n          onBlur={check_empty_field}\r\n          error={error.email}\r\n        />\r\n        <InputText\r\n          type=\"password\"\r\n          name=\"password\"\r\n          label=\"Password:\"\r\n          value={input.password}\r\n          onChange={input_handler}\r\n          onFocus={clear_error}\r\n          onBlur={check_empty_field}\r\n          error={error.password}\r\n        />\r\n        <button type=\"submit\" className=\"submit_button\">\r\n          Log in\r\n        </button>\r\n      </form>\r\n      {errorMessage && <span className=\"err_message\">{errorMessage}</span>}\r\n      <div className=\"foot\">\r\n        <span className=\"question\">\r\n          Non hai un account?\r\n          <span className=\"link\" onClick={() => setSignUp((state) => !state)}>\r\n            Registrati\r\n          </span>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LogIn;\r\n","import { useContext } from \"react\";\r\nimport { AuthContext } from \"../../auth/AuthContext\";\r\nimport { useInputText } from \"../../hooks/useInputText\";\r\nimport { VscArrowLeft } from \"react-icons/vsc\";\r\nimport InputText from \"../inputs/InputText\";\r\n\r\nconst initInput = {\r\n  user_name: \"\",\r\n  email: \"\",\r\n  password: \"\",\r\n};\r\n\r\nconst SignUp = ({ setSignUp }) => {\r\n  const { sign_up, errorMessage } = useContext(AuthContext);\r\n  const {\r\n    input,\r\n    setInput,\r\n    input_handler,\r\n    check_error,\r\n    clear_error,\r\n    check_empty_field,\r\n    error,\r\n  } = useInputText(initInput);\r\n\r\n  const sign_up_submit = async (evt) => {\r\n    evt.preventDefault();\r\n    if (check_error({ required_field: [\"email\", \"password\"] })) return;\r\n    if (await sign_up(input)) {\r\n      setInput(initInput);\r\n      return setSignUp((state) => !state);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"form_container\">\r\n      <div className=\"head\">\r\n        <strong className=\"title\">Registrati</strong>\r\n        <span\r\n          className=\"back_button link\"\r\n          onClick={() => setSignUp((state) => !state)}\r\n        >\r\n          <VscArrowLeft />\r\n        </span>\r\n      </div>\r\n      <form className=\"form_ctrl\" onSubmit={sign_up_submit}>\r\n        <InputText\r\n          type=\"text\"\r\n          name=\"user_name\"\r\n          label=\"Nome Utente:\"\r\n          onChange={input_handler}\r\n          onFocus={clear_error}\r\n          onBlur={check_empty_field}\r\n          error={error.user_name}\r\n        />\r\n        <InputText\r\n          type=\"email\"\r\n          name=\"email\"\r\n          label=\"Email:\"\r\n          onChange={input_handler}\r\n          onFocus={clear_error}\r\n          onBlur={check_empty_field}\r\n          error={error.email}\r\n        />\r\n        <InputText\r\n          type=\"password\"\r\n          name=\"password\"\r\n          label=\"Password:\"\r\n          onChange={input_handler}\r\n          onFocus={clear_error}\r\n          onBlur={check_empty_field}\r\n          value={input.password}\r\n          error={error.password}\r\n        />\r\n        <button className=\"submit_button\" type=\"submit\">\r\n          Registrati\r\n        </button>\r\n      </form>\r\n      {errorMessage && <span className=\"err_message\">{errorMessage}</span>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignUp;\r\n","import { useContext, useEffect } from \"react\";\r\nimport { AuthContext } from \"../../auth/AuthContext\";\r\nimport LogIn from \"../login/LogIn\";\r\nimport SignUp from \"../login/SignUp\";\r\n\r\nconst LogInPage = () => {\r\n  const { signUp, setSignUp, clear_error_message } = useContext(AuthContext);\r\n\r\n  useEffect(() => {\r\n    clear_error_message();\r\n  }, [signUp, clear_error_message]);\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <div className=\"login_section\">\r\n        {signUp ? (\r\n          <SignUp setSignUp={setSignUp} />\r\n        ) : (\r\n          <LogIn setSignUp={setSignUp} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LogInPage;\r\n","const Post404 = () => {\r\n  return (\r\n    <div className=\"post_404\">\r\n      <span>Oops!</span>\r\n      <strong>404</strong>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Post404;\r\n","import { useEffect } from \"react\";\r\nimport { usePostState } from \"../../hooks/usePostState\";\r\nimport Post404 from \"../posts/detail/Post404\";\r\nimport PostLoading from \"../posts/detail/PostLoading\";\r\nimport PostList from \"../posts/PostList\";\r\n\r\nconst PostPage = ({ match, user }) => {\r\n  const type = match.params.type;\r\n  const src = match.params.src;\r\n  const {\r\n    posts,\r\n    postInfo,\r\n    edit,\r\n    src_posts,\r\n    sumbit_post,\r\n    delete_post,\r\n    update_post,\r\n    toggle_edit_post,\r\n    error,\r\n    loadingPost,\r\n  } = usePostState();\r\n\r\n  useEffect(() => {\r\n    src_posts(type, src);\r\n  }, [src_posts, type, src]);\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      {loadingPost ? (\r\n        <PostLoading />\r\n      ) : !error ? (\r\n        <PostList\r\n          post_list={posts}\r\n          post_info={postInfo}\r\n          sumbit_post={sumbit_post}\r\n          update_post={update_post}\r\n          delete_post={delete_post}\r\n          user={user}\r\n          matched={true}\r\n          toggle_edit_post={toggle_edit_post}\r\n          edit={edit}\r\n        />\r\n      ) : (\r\n        <Post404 />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostPage;\r\n","import { useEffect } from \"react\";\r\nimport { usePostState } from \"../../hooks/usePostState\";\r\nimport Post404 from \"../posts/detail/Post404\";\r\nimport PostLoading from \"../posts/detail/PostLoading\";\r\nimport PostList from \"../posts/PostList\";\r\n\r\nconst SinglePost = ({ user, match }) => {\r\n  const {\r\n    posts,\r\n    postInfo,\r\n    edit,\r\n    src_posts,\r\n    update_post,\r\n    toggle_edit_post,\r\n    delete_post,\r\n    error,\r\n    loadingPost,\r\n  } = usePostState();\r\n\r\n  useEffect(() => {\r\n    src_posts(\"_id\", match.params.post_id);\r\n  }, [src_posts, match]);\r\n  return (\r\n    <div className=\"page\">\r\n      {loadingPost ? (\r\n        <PostLoading />\r\n      ) : posts.length > 0 ? (\r\n        <PostList\r\n          post_list={posts}\r\n          post_info={postInfo}\r\n          update_post={update_post}\r\n          delete_post={delete_post}\r\n          user={user}\r\n          matched={true}\r\n          toggle_edit_post={toggle_edit_post}\r\n          edit={edit}\r\n          server_error={error}\r\n          no_content_slice={true}\r\n          new_post_button={false}\r\n        />\r\n      ) : (\r\n        !loadingPost && <Post404 />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SinglePost;\r\n","import { VscSettings } from \"react-icons/vsc\";\r\n\r\nconst SettingsButton = ({ onClick }) => {\r\n  return (\r\n    <div className=\"settings_button\" onClick={onClick}>\r\n      <VscSettings />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SettingsButton;\r\n","import SettingsButton from \"../buttons/SettingsButton\";\r\nimport UserPicture from \"./UserPicture\";\r\n\r\nconst UserHeader = ({ user, matched, settings_event }) => {\r\n  return (\r\n    <div className=\"user_header\">\r\n      <UserPicture src={user.pic} user_name={user.user_name} />\r\n\r\n      <div className=\"head\">\r\n        <strong>{user.user_name}</strong>\r\n\r\n        {matched && <SettingsButton onClick={settings_event} />}\r\n      </div>\r\n\r\n      <div className=\"user_info\">\r\n        <span>{user.bio}</span>\r\n      </div>\r\n      <div className=\"head_color\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserHeader;\r\n","const UploadButton = ({ onUpload }) => {\r\n  return (\r\n    <div className=\"upload_button\">\r\n      <span>Modifica</span>\r\n      <input\r\n        type=\"file\"\r\n        onChange={onUpload}\r\n        name=\"upload_img\"\r\n        accept=\".png, .jpg\"\r\n        className=\"upload_input\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UploadButton;\r\n","import { memo, useEffect, useState } from \"react\";\r\nimport { useInputText } from \"../../../hooks/useInputText\";\r\nimport { useUpdatePic } from \"../../../hooks/useUpdatePic\";\r\nimport UploadButton from \"../../buttons/UploadButton\";\r\nimport TextArea from \"../../inputs/TextArea\";\r\nimport UserPicture from \"../UserPicture\";\r\n\r\nconst PublicSection = ({ user_pic, user_bio, update_account }) => {\r\n  const [updateBtn, setUpdateBtn] = useState(false);\r\n  const { upload_pic } = useUpdatePic();\r\n  const { input, input_handler } = useInputText({\r\n    bio: user_bio,\r\n    max_length: 200,\r\n  });\r\n\r\n  const update_pic = async (evt) => {\r\n    evt.preventDefault();\r\n    const updated_pic = await upload_pic(evt);\r\n    if (updated_pic) {\r\n      const req_obj = { pic: updated_pic };\r\n      if (update_account({ req_obj: req_obj, filter: \"public\" })) return; // => update success\r\n    }\r\n  };\r\n\r\n  const update_bio = async (evt) => {\r\n    evt.preventDefault();\r\n    const req_obj = { bio: input.bio };\r\n    if (update_account({ req_obj: req_obj, filter: \"public\" })) return; // => update success\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user_bio !== input.bio) {\r\n      return setUpdateBtn(true);\r\n    } else {\r\n      return setUpdateBtn(false);\r\n    }\r\n  }, [user_bio, input.bio]);\r\n  return (\r\n    <>\r\n      <div className=\"section\">\r\n        <div className=\"upload_pic_container\">\r\n          <UserPicture src={user_pic} />\r\n          <UploadButton onUpload={update_pic} />\r\n        </div>\r\n        <form className=\"form_ctrl\" onSubmit={update_bio}>\r\n          <TextArea\r\n            value={input.bio}\r\n            label=\"Bio: \"\r\n            name=\"bio\"\r\n            onChange={input_handler}\r\n            font_size={18}\r\n            padding={5}\r\n            max_length={200}\r\n            min_rows={3}\r\n            max_rows={20}\r\n          />\r\n          {updateBtn ? (\r\n            <button type=\"submit\" className=\"submit_button button\">\r\n              Salva Modifiche\r\n            </button>\r\n          ) : (\r\n            <span className=\"idle_button button\">Salva Modifiche</span>\r\n          )}\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default memo(PublicSection);\r\n","import { useAuth } from \"../auth/useAuth\";\r\n\r\nexport const useUpdatePic = () => {\r\n  const { auth } = useAuth();\r\n  const upload_pic = async (evt) => {\r\n    evt.preventDefault();\r\n    const uploadedFile = evt.target.files[0];\r\n    try {\r\n      const base64 = await toBase64(uploadedFile);\r\n\r\n      const req_obj = { image: base64.split(\",\").pop() };\r\n      const res = await auth({ type: \"UPLOAD_PIC\", req_obj: req_obj });\r\n\r\n      const user_pic = res.data.pic;\r\n\r\n      return user_pic;\r\n    } catch (err) {\r\n      console.warn(err);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // convert img to base64\r\n\r\n  const toBase64 = (file) => {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => {\r\n        resolve(reader.result);\r\n      };\r\n      reader.onerror = (error) => {\r\n        reject(error);\r\n      };\r\n    });\r\n  };\r\n\r\n  return { upload_pic };\r\n};\r\n","import { useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../../auth/AuthContext\";\r\nimport { useInputText } from \"../../../hooks/useInputText\";\r\nimport InputText from \"../../inputs/InputText\";\r\n\r\nconst AccountSection = ({ user_name, email }) => {\r\n  const history = useHistory();\r\n  const { update_account, log_out } = useContext(AuthContext);\r\n  const { input, input_handler } = useInputText({\r\n    user_name: \"\",\r\n    email: \"\",\r\n  });\r\n\r\n  const update_event = async (evt) => {\r\n    evt.preventDefault();\r\n\r\n    if (!input.user_name && !input.email) return; // nothing\r\n    let req_obj = { user_name: input.user_name, email: input.email };\r\n    if (!input.email) {\r\n      req_obj = { user_name: input.user_name };\r\n    }\r\n    if (!input.user_name) {\r\n      req_obj = { email: input.email };\r\n    }\r\n    if (update_account({ req_obj: req_obj, filter: \"account\" })) {\r\n      history.push(\"/login\");\r\n      return log_out();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"section\">\r\n      <span className=\"message\">Dovrai rieffettuare l'accesso</span>\r\n      <form className=\"form_ctrl\" onSubmit={update_event}>\r\n        <InputText\r\n          value={input.user_name}\r\n          type=\"text\"\r\n          name=\"user_name\"\r\n          label=\"Nome Utente:\"\r\n          onChange={input_handler}\r\n          placeholder={user_name}\r\n        />\r\n\r\n        <InputText\r\n          value={input.email}\r\n          type=\"email\"\r\n          name=\"email\"\r\n          label=\"Email:\"\r\n          onChange={input_handler}\r\n          placeholder={email}\r\n        />\r\n        {input.user_name || input.email ? (\r\n          <button className=\"submit_button button\" type=\"submit\">\r\n            Aggiorna Account\r\n          </button>\r\n        ) : (\r\n          <span className=\"idle_button button\">Aggiorna Account</span>\r\n        )}\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AccountSection;\r\n","import { useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../../auth/AuthContext\";\r\nimport { useInputText } from \"../../../hooks/useInputText\";\r\nimport InputText from \"../../inputs/InputText\";\r\n\r\nconst required_field = { required_field: [\"password\", \"new_password\"] };\r\n\r\nconst PasswordSection = () => {\r\n  const history = useHistory();\r\n  const { update_account, log_out } = useContext(AuthContext);\r\n  const { input, input_handler, clear_error, check_error, error } =\r\n    useInputText({\r\n      password: \"\",\r\n      new_password: \"\",\r\n    });\r\n\r\n  const update_event = async (evt) => {\r\n    evt.preventDefault();\r\n    if (check_error(required_field)) return; // error\r\n    const req_obj = {\r\n      password: input.password,\r\n      new_password: input.new_password,\r\n    };\r\n    if (update_account({ req_obj: req_obj, filter: \"password\" })) {\r\n      history.push(\"/login\");\r\n      return log_out();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"section\">\r\n      <span className=\"message\">Dovrai rieffettuare l'accesso</span>\r\n      <form onSubmit={update_event} className=\"form_ctrl\">\r\n        <InputText\r\n          value={input.password}\r\n          type=\"password\"\r\n          name=\"password\"\r\n          label=\"Password Corrente:\"\r\n          onChange={input_handler}\r\n          onFocus={clear_error}\r\n          error={error.password}\r\n          error_message=\"obbligatoria\"\r\n        />\r\n        <InputText\r\n          value={input.new_password}\r\n          type=\"password\"\r\n          name=\"new_password\"\r\n          label=\"Nuova Password:\"\r\n          onChange={input_handler}\r\n          onFocus={clear_error}\r\n          error={error.new_password}\r\n          error_message=\"obbligatoria\"\r\n        />\r\n        {input.password || input.new_password ? (\r\n          <button type=\"submit\" className=\"submit_button button\">\r\n            Aggiorna la tua password\r\n          </button>\r\n        ) : (\r\n          <span className=\"idle_button button\">Aggiorna la tua password</span>\r\n        )}\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PasswordSection;\r\n","import { useContext, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../../auth/AuthContext\";\r\nimport { useInputText } from \"../../../hooks/useInputText\";\r\nimport InputText from \"../../inputs/InputText\";\r\n\r\nconst DeleteSection = () => {\r\n  const [showForm, setShowForm] = useState(false);\r\n\r\n  return (\r\n    <div className=\"section\">\r\n      {!showForm ? (\r\n        <DeleteButton cancel_event={() => setShowForm(true)} />\r\n      ) : (\r\n        <DeleteForm cancel_event={() => setShowForm(false)} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeleteSection;\r\n\r\nconst DeleteForm = ({ cancel_event }) => {\r\n  const history = useHistory();\r\n  const { delete_account, log_out } = useContext(AuthContext);\r\n  const { input, input_handler, check_error, clear_error, error } =\r\n    useInputText({\r\n      password: \"\",\r\n    });\r\n\r\n  const delete_event = async (evt) => {\r\n    evt.preventDefault();\r\n    if (check_error({ required_field: [\"password\"] })) return;\r\n    if (await delete_account(input.password)) {\r\n      history.push(\"/login\");\r\n      return log_out();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <form onSubmit={delete_event} className=\"form_ctrl\">\r\n        <span className=\"message\">\r\n          {\"Inserisci password per confermare:\"}\r\n          {error.password && (\r\n            <span className=\"error_message\">Password obbligatoria</span>\r\n          )}\r\n        </span>\r\n        <InputText\r\n          value={input.password}\r\n          type=\"password\"\r\n          name=\"password\"\r\n          onChange={input_handler}\r\n          onFocus={clear_error}\r\n        />\r\n        <div className=\"button_container\">\r\n          <span className=\"cancel_button button\" onClick={cancel_event}>\r\n            ANNULLA\r\n          </span>\r\n          <button className=\"delete_button button\" type=\"submit\">\r\n            CONFERMA\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nconst DeleteButton = ({ cancel_event }) => {\r\n  return (\r\n    <>\r\n      <span className=\"message\">\r\n        Una volta cancellato, non potrai tornare indietro\r\n      </span>\r\n      <span className=\"submit_button button\" onClick={cancel_event}>\r\n        Elimina il tuo account\r\n      </span>\r\n    </>\r\n  );\r\n};\r\n","import { useContext, useState } from \"react\";\r\nimport { AuthContext } from \"../../auth/AuthContext\";\r\n// panel section component\r\nimport PublicSection from \"./panel/PublicSection\";\r\nimport AccountSection from \"./panel/AccountSection\";\r\nimport PasswordSection from \"./panel/PasswordSection\";\r\nimport DeleteSection from \"./panel/DeleteSection\";\r\n\r\nconst UserPanel = ({ close_event, update_account }) => {\r\n  const { user } = useContext(AuthContext);\r\n  const { user_name, email, bio, pic } = user;\r\n  return (\r\n    <div className=\"user_panel_container\">\r\n      <div className=\"user_panel\">\r\n        <div className=\"head\">\r\n          <strong>Impostazioni</strong>\r\n          <span onClick={close_event}>X</span>\r\n        </div>\r\n        <div className=\"scroll_container\">\r\n          {/* <PublicSection\r\n            update_account={update_account}\r\n            user_bio={bio ? bio : \"\"}\r\n            user_pic={pic}\r\n          /> */}\r\n          <Section\r\n            section_class=\"public_section\"\r\n            section_name=\"Profilo Pubblico\"\r\n            is_open={true}\r\n            component={\r\n              <PublicSection\r\n                update_account={update_account}\r\n                user_bio={bio ? bio : \"\"}\r\n                user_pic={pic}\r\n              />\r\n            }\r\n          />\r\n          <Section\r\n            section_class=\"account_section\"\r\n            section_name=\"Account\"\r\n            component={<AccountSection user_name={user_name} email={email} />}\r\n          />\r\n          <Section\r\n            section_class=\"password_section\"\r\n            section_name=\"Aggiorna Password\"\r\n            component={<PasswordSection />}\r\n          />\r\n          <Section\r\n            section_class=\"delete_section\"\r\n            section_name=\"Elimina Account\"\r\n            component={<DeleteSection />}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserPanel;\r\n\r\nconst Section = ({ section_name, section_class, component, is_open }) => {\r\n  const [open, setOpen] = useState(is_open ? \"open\" : \"\");\r\n  const toggle_open = () => {\r\n    if (open) return setOpen(\"\");\r\n    return setOpen(\"open\");\r\n  };\r\n  return (\r\n    <div className={`section_container ${section_class}`}>\r\n      <div className={`section_head ${open}`} onClick={toggle_open}>\r\n        <strong className=\"section_name\">{section_name}</strong>\r\n      </div>\r\n      {open && component}\r\n    </div>\r\n  );\r\n};\r\n","import { useEffect } from \"react\";\r\nimport { usePostState } from \"../../hooks/usePostState\";\r\nimport { useUserPageState } from \"../../hooks/useUserPageState\";\r\nimport PostLoading from \"../posts/detail/PostLoading\";\r\n\r\nimport PostList from \"../posts/PostList\";\r\nimport UserHeader from \"../user/UserHeader\";\r\nimport UserPanel from \"../user/UserPanel\";\r\n\r\nconst UserPage = ({ match, user, update_account }) => {\r\n  const user_name = match.params.user_name;\r\n  // POST USER\r\n  const {\r\n    posts,\r\n    postInfo,\r\n    edit,\r\n    src_posts,\r\n    sumbit_post,\r\n    update_post,\r\n    toggle_edit_post,\r\n    delete_post,\r\n    loadingPost,\r\n  } = usePostState();\r\n  // USER INFO\r\n  const { userInfo, editMode, matched, toggle_edit_mode } = useUserPageState({\r\n    params: match.params.user_name,\r\n    user_name: user && user.user_name,\r\n  });\r\n\r\n  useEffect(() => {\r\n    src_posts(\"user_name\", user_name);\r\n  }, [src_posts, user_name, user]);\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      {editMode && (\r\n        <UserPanel\r\n          update_account={update_account}\r\n          close_event={toggle_edit_mode}\r\n        />\r\n      )}\r\n      {userInfo && (\r\n        <UserHeader\r\n          user={matched ? user : userInfo}\r\n          matched={matched}\r\n          settings_event={toggle_edit_mode}\r\n        />\r\n      )}\r\n\r\n      {loadingPost ? (\r\n        <PostLoading />\r\n      ) : (\r\n        <PostList\r\n          post_list={posts}\r\n          post_info={postInfo}\r\n          sumbit_post={sumbit_post}\r\n          update_post={update_post}\r\n          delete_post={delete_post}\r\n          user={user}\r\n          matched={matched}\r\n          toggle_edit_post={toggle_edit_post}\r\n          edit={edit}\r\n          new_post_button={true}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserPage;\r\n","import { useCallback, useEffect, useState } from \"react\";\r\nimport { useFinder } from \"./useFinder\";\r\nimport { useMatchUser } from \"./useMatchUser\";\r\n\r\nexport const useUserPageState = (init) => {\r\n  //\r\n  const [userInfo, setUserInfo] = useState({});\r\n  const [error, setError] = useState(\"\");\r\n  const { find } = useFinder();\r\n  const [matched] = useMatchUser({\r\n    id: init.user_name && init.user_name,\r\n    target_id: init.params,\r\n  });\r\n  const [editMode, setEditMode] = useState(false);\r\n\r\n  const check_error = (res) => {\r\n    switch (res.status) {\r\n      case 200:\r\n        return false;\r\n      case 401:\r\n        console.warn(\"401 \" + res.statusText);\r\n        setError(res.statusText);\r\n        return true;\r\n      case 404:\r\n        console.warn(\"404 \" + res.statusText);\r\n        setError(res.statusText);\r\n        return true;\r\n      case 409:\r\n        console.warn(\"409 \" + res.statusText);\r\n        setError(res.statusText);\r\n        return true;\r\n      case 500:\r\n        console.warn(\"500 \" + res.statusText);\r\n        setError(res.statusText);\r\n        return true;\r\n      default:\r\n        console.warn(\"An unexpected error has occurred\");\r\n        setError(\"An unexpected error has occurred\");\r\n        return true;\r\n    }\r\n  };\r\n\r\n  const get_user = useCallback(\r\n    async (user_name) => {\r\n      const res = await find({ type: \"GET_USER\", target: user_name });\r\n      if (check_error(res)) return;\r\n      // --> OK\r\n      setUserInfo(res.data.user);\r\n    },\r\n    [find]\r\n  );\r\n\r\n  const toggle_edit_mode = () => {\r\n    setEditMode((edit) => !edit);\r\n  };\r\n\r\n  useEffect(() => {\r\n    get_user(init.params);\r\n  }, [get_user, init.params]);\r\n\r\n  return {\r\n    userInfo,\r\n    matched,\r\n    editMode,\r\n    toggle_edit_mode,\r\n    error,\r\n  };\r\n};\r\n","import { useContext } from \"react\";\r\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\r\nimport { AuthContext } from \"./auth/AuthContext\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport Home from \"./components/pages/Home\";\r\nimport LoginPage from \"./components/pages/LoginPage\";\r\nimport PostPage from \"./components/pages/PostPage\";\r\nimport SinglePost from \"./components/pages/SinglePost\";\r\nimport UserPage from \"./components/pages/UserPage\";\r\n\r\nconst Router = () => {\r\n  const { user, log_out, update_account } = useContext(AuthContext);\r\n  return (\r\n    <BrowserRouter>\r\n      <Navbar user={user} log_out={log_out} />\r\n      <div className=\"page_container\">\r\n        <Switch>\r\n          <Route exact path=\"/\">\r\n            <Redirect to=\"/home\" />\r\n          </Route>\r\n          <Route path=\"/login\" component={LoginPage} />\r\n          <Route\r\n            path=\"/home\"\r\n            render={(props) => <Home {...props} user={user} />}\r\n          />\r\n          <Route\r\n            path=\"/post/search/:type/:src\"\r\n            render={(props) => <PostPage {...props} user={user} />}\r\n          />\r\n          <Route\r\n            path=\"/post/:post_id?\"\r\n            render={(props) => <SinglePost {...props} user={user} />}\r\n          />\r\n          <Route\r\n            path=\"/user/:user_name?\"\r\n            render={(props) => (\r\n              <UserPage\r\n                {...props}\r\n                user={user}\r\n                update_account={update_account}\r\n              />\r\n            )}\r\n          />\r\n        </Switch>\r\n      </div>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default Router;\r\n","import axios from \"axios\";\nimport Router from \"./Router\";\nimport \"./styles/layout.scss\";\nimport \"./styles/input.scss\";\nimport \"./styles/button.scss\";\nimport \"./styles/user.scss\";\nimport \"./styles/post.scss\";\nimport \"./styles/comment.scss\";\nimport \"./styles/panel.scss\";\nimport \"./styles/media_query.scss\";\n\nimport { AuthProvider } from \"./auth/AuthContext\";\n\naxios.defaults.withCredentials = true;\n\nfunction App() {\n  return (\n    <div className=\"layout\">\n      <AuthProvider>\n        <Router />\n      </AuthProvider>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}